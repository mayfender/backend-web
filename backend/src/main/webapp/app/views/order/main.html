<style>
.order-form input::-webkit-outer-spin-button,
.order-form input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
</style>

<div>
	<div class="row">
		<div class="col-xs-12">
			<h1 class="page-header">ข้อมูลการซื้อ</h1>
		</div>
	</div>
	
    <div class="row">
        <div class="col-xs-12">
            <div class="panel panel-primary">
                <div class="panel-body">
                	<div class="row">
						<div class="col-xs-4" style="min-width: 300px;">
							<div class="panel panel-default">
				                <div class="panel-body">
				                
									<div class="form-group input-group">
										<span class="input-group-addon">งวดที่</span>
								      	<select class="form-control" ng-model="formData.period" ng-options="option._id as option.periodDateTime | date:'dd/MM/yyyy' for option in periods" ng-change="searchBtn()">
								  	  	</select>
								      <div class="input-group-btn">
								        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" style="height: 34px;">{{ periodMode.name }} <span class="caret"></span></button>
								        <ul class="dropdown-menu dropdown-menu-right">
								          <li ng-repeat="p in periodModes" ng-click="periodModeChange(p)"><a href="">{{ p.name }}</a></li>
								        </ul>
								      </div>
								    </div>
									
				                	<div class="form-group input-group" ng-hide="periodMode.id == 1">		                	
					                	<input name="period" type='text' class="form-control dtPicker" 
									       style="font-size: 0.9em;" ng-model="formData.newPeriod" date-parser="dd/MM/yyyy" />
									  	<span class="input-group-addon" title="บันทึก" style="cursor: pointer;" ng-click="addPeriod()">
									  		<i class="fa fa-floppy-o"></i>
									  	</span>
				                	</div>
				                	
				                	
				                	<hr />
				                	
				                	
									<form class="form-horizontal order-form">
										<div class="form-group">
											<label class="col-xs-3 control-label input-sm">ชื่อ</label>
										    <div class="col-xs-9">
										    	<input type="text" tabindex="1" class="form-control input-sm" placeholder="ชื่อผู้ซื้อ" ng-model="formData.name" ng-focus="formData.name = null">
										    </div>
										</div>
										<div class="form-group">
										    <label class="col-xs-3 control-label input-sm">เลขที่ซื้อ</label>
										    <div class="col-xs-9">
												<input type="number" tabindex="2" class="form-control input-sm" placeholder="เลขที่ซื้อ" ng-model="formData.orderNumber" ng-keyup="chkOrderNumber()">
										    </div>
										</div>
										<div class="form-group" ng-show="orderNumStr.length == 2 || orderNumStr.length == 3">
										    <label class="col-xs-3 control-label input-sm">บน</label>
										    <div class="col-xs-9">
												<div class="input-group">
													<input type="number" tabindex="3" class="form-control input-sm" placeholder="จำนวนเงินที่ซื้อ" ng-model="formData.bon">
												    <span class="input-group-addon">
												        <input type="checkbox" title="กลับทุกตำแหน่ง" ng-model="formData.bonSw">
												    </span>
												</div>
										    </div>
										</div>
										<div class="form-group" ng-show="orderNumStr.length == 2">
										    <label class="col-xs-3 control-label input-sm">ล่าง</label>
										    <div class="col-xs-9">
												<div class="input-group">
													<input type="number" tabindex="4" class="form-control input-sm" placeholder="จำนวนเงินที่ซื้อ" ng-model="formData.lang">
												    <span class="input-group-addon">
												        <input type="checkbox" title="กลับทุกตำแหน่ง" ng-model="formData.langSw">
												    </span>
												</div>
										    </div>
										</div>
										<div class="form-group" ng-show="orderNumStr.length == 3">
										    <label class="col-xs-3 control-label input-sm">โต๊ด</label>
										    <div class="col-xs-9">
												<input type="number" tabindex="5" class="form-control input-sm" placeholder="จำนวนเงินที่ซื้อ" ng-model="formData.tod">
										    </div>
										</div>
										<div class="form-group" ng-show="orderNumStr.length > 0">
										    <label class="col-xs-3 control-label input-sm">ลอย</label>
										    <div class="col-xs-9">
												<input type="number" tabindex="6" class="form-control input-sm" placeholder="จำนวนเงินที่ซื้อ" ng-model="formData.loy">
										    </div>
										</div>
										
										<button type="button" tabindex="6" class="btn btn-primary pull-right" ng-click="saveOrder()" 
										ng-disabled="!(formData.name && formData.orderNumber && (formData.bon || formData.lang || formData.tod || formData.loy))">บันทึก</button>
									</form>
									
				                </div>
				            </div>
						</div>
					
						<div class="col-xs-8">
							<div class="panel panel-default">
				                <div class="panel-body">
				                
					                <div class="form-group input-group">
										<span class="input-group-addon">ชื่อผู้ซื้อ</span>
								      	<select class="form-control" ng-model="formData.orderName" ng-options="option for option in orderNameLst" ng-change="changeOrderName()">
								  	  		<option value="">--ทั้งหมด--</option>
								  	  	</select>
							  	  		<div class="input-group-addon">
							  	  			<span>ยอดซื้อรวม : </span>
							  	  			<span style="font-weight: 700; text-decoration: underline;">{{ totalPriceSumAll | number:2 }}</span>
							  	  		</div>
								  	  	<select class="form-control" ng-model="formData.discount" ng-change="changePercent()">
								  	  		<option value="10">10%</option>
								  	  		<option value="15">15%</option>
								  	  		<option value="20">20%</option>
								  	  	</select>
								  	  	<div class="input-group-addon">
							  	  			<span>หลังส่วนลด : </span>
							  	  			<span style="font-weight: 700; text-decoration: underline;">{{ (totalPriceSumAll - ((formData.discount/100) * totalPriceSumAll)) | number:2 }}</span>
							  	  		</div>
								    </div>
				                	
				                	<div style="margin-bottom: 5px;">
				                		<i class="fa fa-file-pdf-o fa-2x pull-right" style="cursor: pointer; color: #337ab7;" title="Export" ng-click="exportOrder()"></i>
				                	</div>
				                	
									<ul class="nav nav-tabs">
					                     <li ng-class="{'active': tabActived == 1}" ng-click="changeTab(1)"><a href="" data-toggle="tab">3 ตัวบน</a>
					                     </li>
					                     <li ng-class="{'active': tabActived == 2}" ng-click="changeTab(2)"><a href="" data-toggle="tab">2 ตัวบน</a>
					                     </li>
					                     <li ng-class="{'active': tabActived == 3}" ng-click="changeTab(3)"><a href="" data-toggle="tab">2 ตัวล่าง</a>
					                     </li>
					                     <li ng-class="{'active': tabActived == 4}" ng-click="changeTab(4)"><a href="" data-toggle="tab">ลอย</a>
					                     </li>
					                     <li ng-class="{'active': tabActived == 5}" ng-click="changeTab(5)"><a href="" data-toggle="tab">โต๊ด</a>
					                     </li>
					                     <li ng-class="{'active': tabActived == 6}" ng-click="changeTab(6)"><a href="" data-toggle="tab">เช็คผล</a>
					                     </li>
					                 </ul>
									
									<div class="tab-content">
					                     <div class="tab-pane fade" id="home-pills" ng-class="{'active in': tabActived == 1}">
					                         <div>
					                             <br />
						                         <table class="table table-hover">
													<thead>
														<tr>
															<td>#</td>
															<td>เลขที่ซื้อ</td>
															<td>ราคารวม</td>
															<td>จำนวน</td>
														</tr>
													</thead>
													<tbody>
														<tr ng-repeat="ord in orderData">
															<td>{{ $index + 1 }}</td>
															<td>{{ ord._id }}</td>
															<td>{{ ord.totalPrice | number:2}}</td>
															<td>{{ ord.count | number:0 }}</td>
														</tr>
														<tr>
															<td colspan="2" style="text-align: center; font-weight: 700; text-decoration: underline;">รวม</td>
															<td colspan="2" style="font-weight: 700;">{{ totalPriceSum | number:2 }}</td>
														</tr>
													</tbody>
												</table>
					                         </div>
					                     </div>
					                     <div class="tab-pane fade" id="profile-pills" ng-class="{'active in': tabActived == 2}">
					                         <div>
						                         <br />
						                         <table class="table table-hover">
													<thead>
														<tr>
															<td>#</td>
															<td>เลขที่ซื้อ</td>
															<td>ราคารวม</td>
															<td>จำนวน</td>
														</tr>
													</thead>
													<tbody>
														<tr ng-repeat="ord in orderData">
															<td>{{ $index + 1 }}</td>
															<td>{{ ord._id }}</td>
															<td>{{ ord.totalPrice | number:2}}</td>
															<td>{{ ord.count | number:0 }}</td>
														</tr>
														<tr>
															<td colspan="2" style="text-align: center; font-weight: 700; text-decoration: underline;">รวม</td>
															<td colspan="2" style="font-weight: 700;">{{ totalPriceSum | number:2 }}</td>
														</tr>
													</tbody>
												</table>
					                         </div>
					                     </div>
					                     <div class="tab-pane fade" id="profile-pills" ng-class="{'active in': tabActived == 3}">
					                         <div>
						                         <br />
						                         <table class="table table-hover">
													<thead>
														<tr>
															<td>#</td>
															<td>เลขที่ซื้อ</td>
															<td>ราคารวม</td>
															<td>จำนวน</td>
														</tr>
													</thead>
													<tbody>
														<tr ng-repeat="ord in orderData">
															<td>{{ $index + 1 }}</td>
															<td>{{ ord._id }}</td>
															<td>{{ ord.totalPrice | number:2}}</td>
															<td>{{ ord.count | number:0 }}</td>
														</tr>
														<tr>
															<td colspan="2" style="text-align: center; font-weight: 700; text-decoration: underline;">รวม</td>
															<td colspan="2" style="font-weight: 700;">{{ totalPriceSum | number:2 }}</td>
														</tr>
													</tbody>
												</table>
					                         </div>
					                     </div>
					                     <div class="tab-pane fade" id="profile-pills" ng-class="{'active in': tabActived == 4}">
					                         <div>
						                         <br />
						                         <table class="table table-hover">
													<thead>
														<tr>
															<td>#</td>
															<td>เลขที่ซื้อ</td>
															<td>ราคารวม</td>
															<td>จำนวน</td>
														</tr>
													</thead>
													<tbody>
														<tr ng-repeat="ord in orderData">
															<td>{{ $index + 1 }}</td>
															<td>{{ ord._id }}</td>
															<td>{{ ord.totalPrice | number:2}}</td>
															<td>{{ ord.count | number:0 }}</td>
														</tr>
														<tr>
															<td colspan="2" style="text-align: center; font-weight: 700; text-decoration: underline;">รวม</td>
															<td colspan="2" style="font-weight: 700;">{{ totalPriceSum | number:2 }}</td>
														</tr>
													</tbody>
												</table>
					                         </div>
					                     </div>
					                     <div class="tab-pane fade" id="profile-pills" ng-class="{'active in': tabActived == 5}">
					                         <div>
						                         <br />
						                         <table class="table table-hover">
													<thead>
														<tr>
															<td>#</td>
															<td>เลขที่ซื้อ</td>
															<td>ราคารวม</td>
															<td>จำนวน</td>
														</tr>
													</thead>
													<tbody>
														<tr ng-repeat="ord in orderData">
															<td>{{ $index + 1 }}</td>
															<td>{{ ord._id }}</td>
															<td>{{ ord.totalPrice | number:2}}</td>
															<td>{{ ord.count | number:0 }}</td>
														</tr>
														<tr>
															<td colspan="2" style="text-align: center; font-weight: 700; text-decoration: underline;">รวม</td>
															<td colspan="2" style="font-weight: 700;">{{ totalPriceSum | number:2 }}</td>
														</tr>
													</tbody>
												</table>
					                         </div>
					                     </div>
					                     
					                     
					                     
					                     
					                     
					                     <div class="tab-pane fade" id="profile-pills" ng-class="{'active in': tabActived == 6}">
					                         <div>
						                         <br />
						                         
						                         Waiting
					                         </div>
					                     </div>
					                     
					                     
					                     
					                     
					                     
					                 </div>
									
									
									
				                	
				                </div>
				            </div>
						</div>
                	</div>					
                </div>
                <div class="panel-footer"></div>
            </div>
        </div>
    </div>
</div>