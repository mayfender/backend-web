<style>
.order-form input::-webkit-outer-spin-button,
.order-form input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
.result-panel {
	background-color: #a2bea2; 
	color: black;
}
.result-panel tbody tr:hover {
	background-color: #bad2ba; 
	color: black;
}
.result-panel thead tr th {
	background-color: #85a985;
}
.panel-style {
	background-color: #98b799;
}
.tabh-style a {
	color: black;
}

/* Table header fixed schroll */
.table-fixed tbody {
  height: 365px;
  overflow-y: auto;
  width: 100%;
}
.table-fixed thead,
.table-fixed tbody,
.table-fixed tr,
.table-fixed td,
.table-fixed th {
  display: block;
}
.table-fixed tbody td {
  float: left;
  border-top: .5px solid #ddd !important;
  white-space: nowrap;
}
.table-fixed thead tr th {
  float: left;
}
/* Table header fixed schroll */

.disable-select {
  -webkit-user-select: none;  
  -moz-user-select: none;    
  -ms-user-select: none;      
  user-select: none;
}
</style>

<div>
	<div class="row">
		<div class="col-md-12">
			<h3 class="page-header"><i class="fa fa-book fa-fw"></i> บันทึกข้อมูล</h3>
		</div>
	</div>
	            
                	<div class="row">
						<div class="col-md-4">
							<div class="panel panel-default panel-style" style="margin-bottom: 10px;" ng-show="panel == 0">
				                <div class="panel-body">
				                
									<div class="form-group input-group">
										<span class="input-group-addon">งวดที่</span>
								      	<select class="form-control" ng-model="formData.period" ng-options="option._id as option.periodDateTime | date:'dd/MM/yyyy' for option in periods" ng-change="changePeriod()">
								  	  	</select>
								      <div class="input-group-btn">
								        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" style="height: 34px;">{{ periodMode.name }} <span class="caret"></span></button>
								        <ul class="dropdown-menu dropdown-menu-right">
								          <li ng-repeat="p in periodModes" ng-click="periodModeChange(p)"><a href="">{{ p.name }}</a></li>
								        </ul>
								      </div>
								    </div>
									
				                	<div class="form-group input-group" ng-hide="periodMode.id == 1">		                	
					                	<input name="period" type='text' class="form-control dtPicker" 
									       style="font-size: 0.9em;" ng-model="formData.newPeriod" date-parser="dd/MM/yyyy" />
									  	<span class="input-group-addon" title="บันทึก" style="cursor: pointer;" ng-click="addPeriod()">
									  		<i class="fa fa-floppy-o"></i>
									  	</span>
				                	</div>
				                	
				                	
				                	<hr />
				                	<div style="text-align: center; font-weight: 700;">บันทึกข้อมูลการซื้อ</div>
				                	<br />
				                	
									<form class="form-horizontal order-form" autocomplete="off">
										<fieldset ng-disabled="isFormDisable || isDnDable">
										<div class="form-group">
											<label class="col-md-3 control-label input-sm">ชื่อ</label>
										    <div class="col-md-9">
										    	<input type="text" tabindex="1" id="name" class="form-control input-sm" placeholder="ชื่อผู้ซื้อ" ng-model="formData.name" ng-focus="formData.name = null">
										    </div>
										</div>
										<div class="form-group">
										    <label class="col-md-3 control-label input-sm">เลขที่ซื้อ</label>
										    <div class="col-md-9">
												<input type="text" tabindex="2" maxlength="5" id="orderNumber" class="form-control input-sm" placeholder="เลขที่ซื้อ" ng-model="formData.orderNumber" ng-keyup="chkOrderNumber()">
										    </div>
										</div>
										<div class="form-group" ng-show="formData.orderNumber.length > 1">
										    <label class="col-md-3 control-label input-sm">บน</label>
										    <div class="col-md-9">
												<div class="input-group">
													<input type="number" tabindex="3" class="form-control input-sm" placeholder="จำนวนเงินที่ซื้อ" ng-model="formData.bon">
												    <span class="input-group-addon">
												        <input type="checkbox" tabindex="3" title="กลับทุกตำแหน่ง" ng-model="formData.bonSw" ng-disabled="formData.orderNumber.length > 3">
												    </span>
												</div>
										    </div>
										</div>
										<div class="form-group" ng-show="formData.orderNumber.length == 2">
										    <label class="col-md-3 control-label input-sm">ล่าง</label>
										    <div class="col-md-9">
												<div class="input-group">
													<input type="number" tabindex="4" class="form-control input-sm" placeholder="จำนวนเงินที่ซื้อ" ng-model="formData.lang" 
													ng-focus="formData.lang = formData.bon; formData.langSw = formData.bonSw">
												    <span class="input-group-addon">
												        <input type="checkbox" tabindex="4" title="กลับทุกตำแหน่ง" ng-model="formData.langSw">
												    </span>
												</div>
										    </div>
										</div>
										<div class="form-group" ng-show="formData.orderNumber.length == 3">
										    <label class="col-md-3 control-label input-sm">โต๊ด</label>
										    <div class="col-md-9">
												<input type="number" tabindex="5" class="form-control input-sm" placeholder="จำนวนเงินที่ซื้อ" ng-model="formData.tod">
										    </div>
										</div>
										<div class="form-group" ng-show="formData.orderNumber.length == 1 || formData.orderNumber.length > 3">
										    <label class="col-md-3 control-label input-sm">{{ formData.orderNumber.length == 1 ? 'ลอย' : 'แพ ' + formData.orderNumber.length }}</label>
										    <div class="col-md-9">
												<input type="number" tabindex="6" class="form-control input-sm" placeholder="จำนวนเงินที่ซื้อ" ng-model="formData.loy">
										    </div>
										</div>
										<div class="form-group" ng-show="formData.orderNumber.length == 2">
										    <label class="col-md-3 control-label input-sm">วิ่งบน</label>
										    <div class="col-md-9">
												<input type="number" tabindex="6" class="form-control input-sm" placeholder="จำนวนเงินที่ซื้อ" ng-model="formData.runBon">
										    </div>
										</div>
										<div class="form-group" ng-show="formData.orderNumber.length == 1">
										    <label class="col-md-3 control-label input-sm">วิ่งล่าง</label>
										    <div class="col-md-9">
												<input type="number" tabindex="6" class="form-control input-sm" placeholder="จำนวนเงินที่ซื้อ" ng-model="formData.runLang">
										    </div>
										</div>
										
										<button type="submit" tabindex="6" class="btn btn-primary pull-right" ng-click="saveOrder()"
											ng-disabled="!(formData.name && formData.orderNumber && (formData.bon || formData.lang || formData.loy ||
											formData.runBon || formData.runLang ))">บันทึก</button>
										
										</fieldset>
									</form>
				                </div>
				            </div>
				            
				            <div class="panel panel-default panel-style" style="margin-bottom: 10px;" ng-show="panel == 1">
				                <div class="panel-body">
				            		<div style="text-align: center; font-weight: 700;">ผลสลาก</div>
				            		<br />
				            		<form class="form-horizontal order-form">
										<div class="form-group">
											<label class="col-md-3 control-label input-sm">3 ตัวบน</label>
										    <div class="col-md-9">
										    	<input type="text" tabindex="7" class="form-control input-sm" placeholder="3 ตัวบน" ng-model="formData.result3" ng-change="saveResult()">
										    </div>
										</div>
										<div class="form-group">
											<label class="col-md-3 control-label input-sm">2 ตัวล่าง</label>
										    <div class="col-md-9">
										    	<input type="text" tabindex="8" class="form-control input-sm" placeholder="2 ตัวล่าง" ng-model="formData.result2" ng-change="saveResult()">
										    </div>
										</div>
									</form>
				                </div>
			                </div>
			                
			                <div style="text-align: center;">
				            	<i class="fa fa-exchange fw" title="สลับหน้า" style="color: #337ab7; margin-bottom: 10px;" ng-click="panel == 0 ? panel = 1: panel = 0;"></i>
				            </div>
			                
						</div>
					
						<div class="col-md-8">
							<div class="panel panel-default panel-style">
				                <div class="panel-body">
				                
					                <div class="form-group input-group" style="margin-bottom: 10px;">
										<span class="input-group-addon">ชื่อผู้ซื้อ</span>
								      	<select class="form-control" ng-model="formData.orderName" ng-options="option for option in orderNameLst" ng-change="changeOrderName()">
								  	  		<option value="">--ทั้งหมด--</option>
								  	  	</select>
										<span class="input-group-addon">ค้นหา</span>
										<input type="text" class="form-control" placeholder="เลขที่ซื้อ" ng-model="formData.orderNumberSearch" />
								    </div>

									<div style="position: absolute; top: 40%; left: 50%; z-index: 1000;" ng-show="isLoadProgress">
										<div style="position: relative; left: -50%;">
									   		<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i>
										</div>
									</div>
								    
									<ul class="nav nav-tabs tabh-style" style="font-size: 12px; background-color: #85a985; border-radius: 5px;">
					                     <li ng-class="{'active': tabActived == 0}" ng-click="changeTab(0)"><a href="" data-toggle="tab">รายการซื้อ</a>
					                     </li>
					                     <li ng-class="{'active': tabActived == 1}" ng-click="changeTab(1)"><a href="" data-toggle="tab">รวม 3</a>
					                     </li>
					                     
					                     <li class="dropdown" ng-class="{'active': tabActived == 2 || tabActived == 3}">
									     	<a class="dropdown-toggle" data-toggle="dropdown" href="">
									      		รวม{{ tabActived == 2 ? ' 2 บน' : (tabActived == 3 ? ' 2 ล่าง': ' 2') }}&nbsp;<span class="caret"></span>
									     	</a>
										     <ul class="dropdown-menu">
										     	<li><a href="" ng-click="changeTab(2)">บน</a></li>
										     	<li><a href="" ng-click="changeTab(3)">ล่าง</a></li>
										     </ul>
									     </li>
					                     
					                     <li class="dropdown" ng-class="{'active': tabActived == 4 || tabActived == 41 || tabActived == 42 || tabActived == 43 || tabActived == 44}">
									     	<a class="dropdown-toggle" data-toggle="dropdown" href="">
									      		รวม{{ loyGroupTitle[tabActived] || 'ชุด' }}&nbsp;<span class="caret"></span>
									     	</a>
										     <ul class="dropdown-menu">
										     	<li><a href="" ng-click="changeTab(4)">ลอย</a></li>
										     	<li><a href="" ng-click="changeTab(41)">แพ 4</a></li>
										     	<li><a href="" ng-click="changeTab(42)">แพ 5</a></li>
										     	<li><a href="" ng-click="changeTab(43)">วิ่งบน</a></li>
										     	<li><a href="" ng-click="changeTab(44)">วิ่งล่าง</a></li>
										     </ul>
									     </li>
					                     <li ng-class="{'active': tabActived == 5}" ng-click="changeTab(5)"><a href="" data-toggle="tab">รวมโต๊ด</a>
					                     </li>
					                     <li ng-class="{'active': tabActived == 6}" ng-click="changeTab(6)"><a href="" data-toggle="tab">เช็คผล</a>
					                     </li>
					                 </ul>
									
									<div class="tab-content">
										<div class="tab-pane fade" id="home-pills" ng-class="{'active in': tabActived == 0}">
				                             <div class="form-horizontal" style="margin-top: 5px; margin-bottom: 5px; border-radius: 5px; background-color: #85a985; border: .5px solid #ffffffa6; padding-bottom: 5px; padding-left: 10px;">
					                             <div class="checkbox">
												    <label>
												      <input type="checkbox" ng-model="checkBoxTypeAll" ng-true-value="true" ng-false-value="false" ng-change="checkBoxTypeAllFn()"> All
												    </label>&nbsp;&nbsp;&nbsp;
												    <label>
												      <input type="checkbox" ng-model="checkBoxType.bon3" ng-true-value="true" ng-false-value="false" ng-change="chkBoxTypeChange()"> 3 บน
												    </label>&nbsp;&nbsp;&nbsp;
												    <label>
												      <input type="checkbox" ng-model="checkBoxType.bon2" ng-true-value="true" ng-false-value="false" ng-change="chkBoxTypeChange()"> 2 บน
												    </label>&nbsp;&nbsp;&nbsp;
												    <label>
												      <input type="checkbox" ng-model="checkBoxType.lang2" ng-true-value="true" ng-false-value="false" ng-change="chkBoxTypeChange()"> 2 ล่าง
												    </label>&nbsp;&nbsp;&nbsp;
												    <label>
												      <input type="checkbox" ng-model="checkBoxType.loy" ng-true-value="true" ng-false-value="false" ng-change="chkBoxTypeChange()"> ลอย
												    </label>&nbsp;&nbsp;&nbsp;
												    <label>
												      <input type="checkbox" ng-model="checkBoxType.pair4" ng-true-value="true" ng-false-value="false" ng-change="chkBoxTypeChange()"> แพ 4
												    </label>&nbsp;&nbsp;&nbsp;
												    <label>
												      <input type="checkbox" ng-model="checkBoxType.pair5" ng-true-value="true" ng-false-value="false" ng-change="chkBoxTypeChange()"> แพ 5
												    </label>&nbsp;&nbsp;&nbsp;
												    <label>
												      <input type="checkbox" ng-model="checkBoxType.runBon" ng-true-value="true" ng-false-value="false" ng-change="chkBoxTypeChange()"> วิ่งบน
												    </label>&nbsp;&nbsp;&nbsp;
												    <label>
												      <input type="checkbox" ng-model="checkBoxType.runLang" ng-true-value="true" ng-false-value="false" ng-change="chkBoxTypeChange()"> วิ่งล่าง
												    </label>
												 </div>
											 </div>
											
											  <table class="table table-hover result-panel table-fixed">
											    <thead>
											      <tr>
														<th style="width: 12%">#</th>
														<th style="width: 20%">วันที่</th>
														<th style="width: 25%">ชื่อ</th>
														<th style="width: 28%">เลขที่ซื้อ</th>
														<th style="width: 15%">หมายเหตุ</th>
													</tr>
											    </thead>
											    <tbody id="orderDataInput" class="disable-select">
											     	<tr ng-repeat="ord in orderData | filter:{'orderNumber': formData.orderNumberSearch}:comparator" ng-dblclick="updateDell(ord)">
														<td style="width: 12%">{{ $index + 1 }})</td>
														<td style="width: 20%">{{ ord.createdDateTime | date:'dd/MM HH:mm' }}</td>
														<td style="width: 25%">{{ ord.name }}</td>
														<td style="width: 28%">{{ ord.symBol }}</td>
														<td style="width: 15%">{{ ord.note || '&nbsp;' }}</td>
													</tr>
											    </tbody>
											  </table>
											  
											<div style="font-weight: 700; ">
												<div>
													<span>ยอดซื้อทั้งหมด {{ formData.orderName ? '(' + formData.orderName + ')' : '' }} : </span>
					  	  							<span>{{ totalPriceSumAll | number:2 }}</span>
												</div>
												<div>							
										  	  		<span style=" float: left;">หลังส่วนลด&nbsp;</span>
					  	  							<select class="form-control input-sm" style="width: 100px; float: left;" ng-model="formData.discount" ng-change="changePercent()">
											  	  		<option value="10">10%</option>
											  	  		<option value="15">15%</option>
											  	  		<option value="20">20%</option>
											  	  	</select>
				  	  								&nbsp;: <span>{{ (totalPriceSumAll - ((formData.discount/100) * totalPriceSumAll)) | number:2 }}</span>
												</div>
											</div>
					                     </div>
					                     <div class="tab-pane fade fixedheader" id="profile-pills" 
					                     	ng-class="{'active in': tabActived == 1 || tabActived == 2 || tabActived == 3 ||
					                     							tabActived == 4 || tabActived == 41 || tabActived == 42 || 
					                     							tabActived == 43 || tabActived == 44 || tabActived == 5}">
												
					                         <table class="table table-hover result-panel table-fixed" style="margin-top: 5px;">
												<thead>
													<tr>
														<th style="width: 15%">#</th>
														<th style="width: 30%">เลขที่ซื้อ</th>
														<th style="width: 35%">ราคารวม</th>
														<th style="width: 20%">จำนวน</th>
													</tr>
												</thead>
												<tbody>
													<tr ng-repeat="ord in orderData | filter:{'_id': formData.orderNumberSearch}:comparator">
														<td style="width: 15%">{{ $index + 1 }})</td>
														<td style="width: 30%">{{ ord._id }}</td>
														<td style="width: 35%">{{ ord.totalPrice | number:2}}</td>
														<td style="width: 20%">{{ ord.count | number:0 }}</td>
													</tr>
												</tbody>
											</table>
											<div>
											  	<span class="pull-right" style="font-weight: 700;">
											  		รวม {{ totalPriceSum | number:2 }}&nbsp;&nbsp;&nbsp;&nbsp;
											  	</span>
											</div>
					                     </div>
					                     <div class="tab-pane fade" id="profile-pills" ng-class="{'active in': tabActived == 6}">
					                         <div>
					                         
					                         	<div class="panel panel-default result-panel" style="margin-top: 5px; margin-bottom: 5px;" ng-repeat="resG in resultGroup1">
									            	<div class="panel-body">
						                         		<div><span class="pull-right" style="font-weight: 700; text-decoration: underline;">{{ resG.title }}</span></div>
								                         <table class="table table-hover">
															<thead>
																<tr>
																	<td>#</td>
																	<td>ชื่อ</td>
																	<td>ราคาซื้อ</td>
																	<td>ราคาจ่าย</td>
																</tr>
															</thead>
															<tbody>
																<tr ng-repeat="res in resG.result">
																	<td>{{ $index + 1 }}</td>
																	<td>{{ res._id }}</td>
																	<td>{{ resG.title == 'โต๊ด' ? res.todPrice : res.price }}</td>
																	<td>-</td>
																</tr>
																<tr ng-show="resG.result.length == 0">
																	<td colspan="4" style="text-align: center;">
																		<i class="fa fa-ban fa-3x" style="color: red;"></i>
																	</td>
																</tr>
															</tbody>
														</table>									                	
									                </div>
												</div>
					                         	
												<div class="panel panel-default result-panel" style="margin-bottom: 5px;" ng-repeat="resG in resultGroup2">
									            	<div class="panel-body">
						                         		<div><span class="pull-right" style="font-weight: 700; text-decoration: underline;">{{ resG.title }}</span></div>
								                         <table class="table table-hover">
															<thead>
																<tr>
																	<td>#</td>
																	<td>ชื่อ</td>
																	<td>เลขที่ซื้อ</td>
																	<td>ราคาซื้อ</td>
																	<td>ราคาจ่าย</td>
																</tr>
															</thead>
															<tbody>
																<tr>
																	<tr ng-repeat="res in resG.result">
																	<td>{{ $index + 1 }}</td>
																	<td>{{ res.name }}</td>
																	<td>{{ res.orderNumber }}</td>
																	<td>{{ res.price }}</td>
																	<td>-</td>
																</tr>
																<tr ng-show="resG.result.length == 0">
																	<td colspan="5" style="text-align: center;">
																		<i class="fa fa-ban fa-3x" style="color: red;"></i>
																	</td>
																</tr>
															</tbody>
														</table>									                	
									                </div>
												</div>
												
					                         </div>
					                     </div>
					                 </div>           	
				                </div>
				            </div>
				            
				            
            <!-- <div class="panel panel-default panel-style" style="margin-bottom: 0;">
                 <div class="panel-body">
                	<div class="form-group input-group" style="margin-bottom: 0;">
				    	<div class="input-group-addon">
			  	  			<span>ยอดซื้อรวม : </span>
			  	  			<span style="font-weight: 700; text-decoration: underline;">{{ totalPriceSumAll | number:2 }}</span>
			  	  		</div>
				  	  	<select class="form-control" ng-model="formData.discount" ng-change="changePercent()">
				  	  		<option value="10">10%</option>
				  	  		<option value="15">15%</option>
				  	  		<option value="20">20%</option>
				  	  	</select>
				  	  	<div class="input-group-addon">
			  	  			<span>หลังส่วนลด : </span>
			  	  			<span style="font-weight: 700; text-decoration: underline;">{{ (totalPriceSumAll - ((formData.discount/100) * totalPriceSumAll)) | number:2 }}</span>
			  	  		</div>
				    </div>
                 </div>
			</div> -->
			
			
			
				            
		</div>
	</div>					
</div>