<style>
	.buttonHide.ng-hide.ng-hide-animate{
		display: none !important;
	}
</style>

<div>
	<div class="row">
		<div class="col-xs-12">
			<h1 class="page-header">แจ้งเตือน</h1>
		</div>
	</div>
	
    <div class="row">
        <div class="col-xs-12">
			<div class="row">
				<div class="col-xs-8">
					<div class="panel panel-primary">
						<div class="panel-heading">
							<i class="fa fa-bell fa-fw"></i> รายการแจ้งเตือน
							<div class="pull-right" style="position: relative; bottom: 5px; right: -10px;">
								<div class="btn-group">
									<button id="group_menu_{{ group.id }}" type="button" ng-hide="group.isHide" class="btn btn-default btn-sm btn-outline buttonHide" ng-class="{'active': group.isActive}" ng-repeat="group in notificationGroups" ng-click="changeGroup(group)">
										{{ group.name }}<span class="badge pull-right" style="background-color: #a03b42; color: white;" ng-show="group.alertNum">{{ group.alertNum }}</span>
									</button>
								</div>
								&nbsp;
								<div class="btn-group pull-right">
								    <button type="button" class="btn btn-default btn-sm btn-outline dropdown-toggle active" data-toggle="dropdown">
								      	{{ lastTakeActionMenuActive.name }}&nbsp;<span class="caret"></span>
								    </button>
								    <ul class="dropdown-menu">
								      	<li id="action_menu_{{ menu.id }}" ng-repeat="menu in isTakeActionMenus" ng-click="actionMenu(menu)">
								      		<a href="">
								      		<i class="fa" ng-class="{'fa-circle-o': menu.id == 1, 'fa-check-circle-o': menu.id == 2, 'fa-adjust': menu.id == 3, 'fa-asterisk': menu.id == 4}" ng-style="menu.id == 4 ? {'color': '#d6990c'} : {}"></i> 
								      		{{ menu.name }}
								      		</a>
								      	</li>
								    </ul>
							  	</div>
							</div>
							
							<div class="pull-right" style="position: relative; bottom: 5px;" ng-hide="group6">
								<div class="form-group input-group" style="width: 200px;">
								  	<span class="input-group-addon"><i class="fa fa-user"></i></span>
								  	<select name="column" class="form-control input-sm" ng-disabled="!isAllUser" ng-model="formData.userId" ng-options="option.id as option.showname for option in users" ng-change="changeUser()">
										<option value="">{{ allUserNoSelect }}</option>
							  		</select>
							  		<span class="input-group-addon" ng-show="group1">
							        	<input type="checkbox" ng-model="isAllUser" title="ผู้ใช้อื่น" ng-change="checkAllUser()">
							      	</span>
								</div>
							</div>
							
						</div>
						<!-- /.panel-heading -->
						<div class="panel-body" style="padding: 3px;">
							<div class="row">
								<div class="col-xs-12">
									<div class="list-group" style="margin-bottom: 0;">
										<div class="list-group-item" style="padding-top: 0; padding-bottom: 0;">
											<div class="row">
												<div class="alert alert-info form-group input-group" style="padding-top: 3px; padding-bottom: 3px; margin: 3px;">
													<span class="input-group-addon" style="border: 0px; background: none; color: #337AB7;">
														{{'pagination.page' | translate}}: {{formData.currentPage}} {{'pagination.of' | translate}} {{ numPages | number:0 }} ({{'pagination.total' | translate}} {{ totalItems | number:0 }} {{'pagination.items' | translate}})
													</span>
													<pagination ng-change="pageChanged()" total-items="totalItems"
																first-text="{{'pagination.first' | translate}}"
																previous-text="{{'pagination.previous' | translate}}"
																next-text="{{'pagination.next' | translate}}"
																last-text="{{'pagination.last' | translate}}"
																ng-model="formData.currentPage" items-per-page="formData.itemsPerPage"
																max-size="maxSize" class="pagination-sm pull-right" boundary-links="true"
																rotate="false" num-pages="numPages" style="margin: auto;" />
													<span class="input-group-addon" style="padding: 0px 5px 0px 3px; border: 0px; background: none; color: #337AB7;">
														<select style="height: 28px;" ng-options="option for option in [5,10,20,30,40,50,100] track by option" ng-model="formData.itemsPerPage" ng-change="changeItemPerPage()"></select>&nbsp;{{'pagination.per_page' | translate}}								
													</span>
												</div>
											</div>
										</div>
										<div class="list-group-item col-xs-12" ng-repeat="data in notificationList track by $index" ng-style="data.isTakeAction ? {color: '#b7b3ae'} : lastTakeActionMenuActive.id == 4 ? {color: '#d6990c'} : {}" 
											 style="padding-left: 0;">
											 
											 <div class="col-xs-9" style="padding: 0;">
												<span style="display: -webkit-box;-webkit-line-clamp: 1;-webkit-box-orient: vertical;overflow: hidden;text-overflow: ellipsis; text-align: left;">
													<span style="display: inline-block; width: 40px; text-align: right;">{{ $index + 1 + ((formData.currentPage - 1) * formData.itemsPerPage) }}.</span>&nbsp;&nbsp;&nbsp;	
													<span class="checkbox_animate">
														<label style="margin: 0;" ng-style="lastTakeActionMenuActive.id != 4 ? {'cursor': 'pointer'} :{}">
											            	<input type="checkbox" value="" ng-model="data.isTakeAction" ng-change="takeAction(data)" ng-disabled="lastTakeActionMenuActive.id == 4">
											            	<span class="cr"><i class="cr-icon glyphicon glyphicon-ok"></i></span>
											            	{{ data.subject }} / 
											          	</label>
										            	<span class="small">{{ data.detail }}</span>
											        </span>
												</span>
											</div>
											<div class="col-xs-3">
												<span class="pull-right">
													<em class="text-muted small">{{ data.bookingDateTimeStr }}</em>&nbsp;&nbsp;&nbsp;
													<i class="fa fa-eye fa-lg" style="cursor: pointer;" title="ดูรายละเอียด" ng-click="view(data)"></i>
													<i class="fa fa-times fa-lg user-action-icon-danger" style="margin-left: 3px;" ng-show="lastTakeActionMenuActive.id == 4 && lastGroupActive.id == 3" ng-click="remove(data._id)"></i>
												</span>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
						<!-- /.panel-body -->
						<div class="panel-footer" style="padding-top: 5px; padding-bottom: 5px;">
                            <!-- <div class="row">
								<div class="btn-group pull-right" style="margin-right: 5px;">
									<button type="button" class="btn btn-primary btn-sm btn-outline">รอ take action</button>
									<button type="button" class="btn btn-primary btn-sm btn-outline">take action แล้ว</button>
								</div>
							</div> -->
                        </div>
					</div>
				</div>
				<!-- /.col-lg-4 -->
				
				<div class="col-xs-4">
						<div class="panel panel-primary">
							<div class="panel-heading">
								<i class="fa fa-clock-o fa-fw"></i> {{ mode == 1 ? 'สร้าง' : mode == 2 ? 'แก้ใข' : 'แสดง'}}รายการแจ้งเตือนทั่วไป
							</div>
							<!-- /.panel-heading -->
							<div class="panel-body">
								
								<form name="bookingForm" novalidate ng-submit="booking()">
									<div class="form-group" ng-class="{'has-error':bookingForm.subject.$invalid}">
									    <label class="control-label">หัวข้อการแจ้งเตือน *</label>
									    <input type="text" name="subject" class="form-control" required="required" ng-model="formData.subject" ng-disabled="mode == 3">
									</div>
									<div class="form-group" ng-class="{'has-error':bookingForm.detail.$invalid}">
									    <label class="control-label">รายละเอียดการแจ้งเตือน *</label>
										<textarea class="form-control" name="detail" rows="5" style="resize: vertical;" required="required" ng-model="formData.detail" ng-disabled="mode == 3"></textarea>
									</div>
									<div class="form-group" ng-class="{'has-error':bookingForm.date.$invalid || bookingForm.time.$invalid}">
										<div class="input-group">
										  	<span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
										    <input type="text" name="date" class="form-control input-sm" readonly="readonly" required="required" date-parser="dd/MM/yyyy" 
								    	   	   ng-model="formData.date" placeholder="วันที่ *" my-datepicker="dateConf" ng-disabled="mode == 3">
											<span class="input-group-addon"><i class="glyphicon glyphicon-time"></i></span>
											<input type="text" name="time" class="form-control input-sm" required="required" dn-timepicker="{{ timesCfg.format }}" ng-model="formData.time" placeholder="เวลา *" 
													min-time="{{ startTimesCfg.minTime }}" max-time="{{ startTimesCfg.maxTime }}" step="{{ timesCfg.step }}" ng-disabled="mode == 3" />
										</div>
									</div>
									<div class="pull-right">
										<button type="button" class="btn btn-primary" ng-show="mode == 2 || mode == 3" ng-click="clear()" title="กลับสู่หน้าสร้างรายการแจ้งเตือน">กลับ</button>
										<button type="submit" class="btn btn-primary" ng-hide="mode == 3" ng-disabled="bookingForm.$invalid" title="{{ bookingForm.$invalid ? 'กรุณากรอกข้อมูลให้ครบถ้วน' : ''}}">{{ mode == 1 ? 'บันทึก' : 'แก้ใข'}}</button>
									</div>
								</form>
								
							</div>
							<!-- /.panel-body -->
							<div class="panel-footer" style="padding-top: 5px; padding-bottom: 5px;"></div>
						</div>
					</div>
			</div>            
        </div>
    </div>
</div>